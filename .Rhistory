, threshold_type = '<', time_threshold = 2, summary_type = 'month'
, plot_title = TRUE)
devtools::load_all(".")
threshold_summary(dat_wq, param = 'do_mgl', parameter_threshold = 2
, threshold_type = '<', time_threshold = 2, summary_type = 'month'
, plot_title = TRUE)
devtools::load_all(".")
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = FALSE)
devtools::load_all(".")
?threshold_criteria_plot
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, rng = 2012
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, monthly_smooth = TRUE
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
devtools::load_all(".")
?historical_daily_range
data(apacpwq)
dat <- apacpwq
dat <- qaqc(apacpwq, qaqc_keep = c('0', '3', '5'))
historical_daily_range(dat, param = 'do_mgl', target_yr = 2013, criteria = 2)
View(apacpwq)
min(apacpwq$cdepth, na.rm = T)
min(apacpwq$level, na.rm = T)
min(apacpwq$clevel, na.rm = T)
?seasonal_boxplot
dat <- elksmwq
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
seasonal_boxplot(dat, param = 'sal')
devtools::load_all(".")
source('C:/Users/Julie/Desktop/SWMPrExtension/R/seasonal_boxplot_alt.R', echo=TRUE)
?seasonal_boxplot_alt
dat <- elksmwq
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
seasonal_boxplot_alt(dat, param = 'do_mgl')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'do_mgl')
library(dplyr)
seasonal_boxplot_alt(dat, param = 'do_mgl')
seasonal_boxplot_alt(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot_alt(dat, param = 'sal')
seasonal_boxplot(dat, param = 'sal')
seasonal_boxplot(dat, param = 'sal')
?seasonal_boxplot_alt
devtools::load_all(".")
seasonal_boxplot(dat, param = 'sal')
devtools::load_all(".")
devtools::load_all(".")
seasonal_boxplot(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'sal')
devtools::load_all(".")
devtools::load_all(".")
seasonal_boxplot(dat, param = 'sal')
rlang::last_error()
devtools::load_all(".")
rlang::last_error()
seasonal_boxplot(dat, param = 'sal')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'sal', free_y = T)
seasonal_boxplot(dat, param = 'ph', free_y = T)
dat2 <- dat
dat2$sal[1:3] <- c(-5, -2, -1.5)
dat2 <- dat
dat2$sal[1:3] <- c(-5, -2, -1.5)
seasonal_boxplot(dat, param = 'sal', free_y = T)
View(dat)
seasonal_boxplot(dat2, param = 'sal', free_y = T)
View(dat2)
devtools::load_all(".")
seasonal_boxplot(dat2, param = 'sal', free_y = T)
min(dat2$sal)
min(dat2$sal, na.rm = T)
devtools::load_all(".")
raw_boxplot(dat2, param = 'sal', free_y = T)
dat2$sal[1:3] <- c(-50, -2, -1.5)
raw_boxplot(dat2, param = 'sal', free_y = T)
raw_boxplot(dat2, param = 'ph', free_y = T)
raw_boxplot(dat2, param = 'ph', free_y = F)
raw_boxplot(dat2, param = 'turb', free_y = F, log_trans = T)
raw_boxplot(dat2, param = 'turb', free_y = T, log_trans = T)
?pretty
devtools::load_all(".")
?annual_range
data(elksmwq)
dat <- elksmwq
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
do_plt <- annual_range(dat, param = 'ph', target_yr = 2012, free_y = T)
do_plt <- annual_range(dat, param = 'sal', target_yr = 2012, free_y = T)
do_plt <- annual_range(dat, param = 'sal', target_yr = 2012, criteria = 2, free_y = T)
do_plt <- annual_range(dat, param = 'sal', target_yr = 2012, criteria = 2)#, free_y = T)
annual_range(dat, param = 'sal', target_yr = 2012, criteria = 2)#, free_y = T)
do_plt <-
annual_range(dat, param = 'sal', target_yr = 2012, free_y = T)
annual_range(dat, param = 'sal', target_yr = 2012, free_y = T)
annual_range(dat, param = 'sal', target_yr = 2012, free_y = F)
annual_range(dat, param = 'ph', target_yr = 2012, free_y = F)
# do_plt <-
annual_range(dat, param = 'ph', target_yr = 2012, free_y = T)
View(dat_wq)
chk <- dat_wq %>% filter(year(datetimstamp = 2016))
# do_plt <-
annual_range(dat, param = 'ph', target_yr = 2013, free_y = T)
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2013, free_y = T)
?pretty_breaks
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
?pretty_breaks
pretty_breaks()(1:100)
library(scales)
pretty_breaks()(1:100)
?range
pretty_breaks()(range(dat$sal))
range(dat$sal)
range(dat$sal, na.rm = T)
pretty_breaks()(range(dat$sal, na.rm = T))
pretty_breaks(n = 8)(range(dat$sal, na.rm = T))
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
tmp <- annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
min(tmp)
range(tmp[ , c(2:5)])
devtools::load_all(".")
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
devtools::load_all(".")
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
View(x)
View(dat)
chk <- dat %>% filter(year(datetimestamp == 2016))
chk <- dat %>% filter(year(datetimestamp) == 2016)
library(lubridate)
chk <- dat %>% filter(year(datetimestamp) == 2016)
View(chk)
chk <- chk %>% filter(month(datetimestamp) == 1)
View(chk)
min(chk$ph)
min(chk$ph, na.rm = T)
View(x)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
devtools::load_all(".")
# do_plt <-
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
# do_plt <-
annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
# chk <- dat %>% filter(year(datetimestamp) == 2016)
chk <- dat %>% filter(year(datetimestamp) == 2016)
View(chk)
min(chk$ph, na.rm = T)
devtools::load_all(".")
annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
tmp <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
tmp
tmp[is.nan(tmp)] <- NA
tmp[ , is.nan(tmp)] <- NA
tmp[is.nan(tmp), ] <- NA
tmp[, c(2:5)][is.nan(tmp[, c(2:5)]), ] <- NA
tmp[, c(2:5)]
tmp[is.nan(tmp[, c(2:5)]), ] <- NA
replace(tmp, is.na(tmp), 0)
replace(tmp, is.na(tmp), NA)
replace(tmp, is.infinite(tmp), NA)
replace(tmp, is.finite(tmp), NA)
?is.infinite
devtools::load_all(".")
annual_range(dat, param = 'sal', target_yr = 2016, free_y = T)
annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
devtools::load_all(".")
annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
View(x)
is.infinite(x[1, 2])
is.infinite(x[[1, 2]])
is.infinite(x[[1, 3]])
x[[, c(2:5)]] <- lapply(dat_month[[, c(2:5)]], function(x) {})
x[[, c(2:5)]]
x
dat_month[, c(2:5)] <- lapply(dat_month[, c(2:5)], function(x) {})
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {is.nan(x)<- NA})
devtools::load_all(".")
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
x
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {is.nan(x) <- NA})
?is.nan
lapply(x[, c(2:5)], function(x) {is.nan(x) <- NA})
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {x[is.nan(x)] <- NA})
x
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
x
lapply(x[, c(2:5)], function(x) {x[is.nan(x)] <- NA})
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {x[, is.nan(x)] <- NA})
replace(x, is.na(x), 0)
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
replace(x, is.na(x), NA)
devtools::load_all(".")
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
replace(x, is.na(x), 0)
# replace any
dat_month <- replace(dat_month, is.na(dat_month), NA)
replace(x, is.na(x), NA)
replace(x, is.infinite(x), NA)
replace(x[, c(2:5)], is.infinite(x[, c(2:5)]), NA)
lapply(x[, c(2:5)], function(x) {replace(x, is.infinite(x), NA)})
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {replace(x, is.infinite(x), NA)})
x
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {replace(x, is.infinite(x), NA)})
x
?replace
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
# replace any
return(dat_month)
devtools::load_all(".")
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {x[, is.nan(x)] <- NA})
# do_plt <-
x <- annual_range(dat, param = 'ph', target_yr = 2016, free_y = T)
x
x[, c(2:5)] <- lapply(x[, c(2:5)], function(x) {replace(x, c('NaN', '-Inf', 'Inf'), NA)})
?replace_with_na
library(tidyr)
?replace_with_na
devtools::load_all(".")
devtools::load_all(".")
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2007, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2012, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2012, 2014), by_month = FALSE)
ceiling(-1.5)
floor(-1.5)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2012, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2012, 2014), by_month = FALSE)
ceiling(-2.3)
devtools::load_all(".")
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2010, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb', log_trans = T
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb', log_trans = T
, hist_rng = c(2010, 2014), by_month = FALSE)
?range
range(dat_wq, na.rm = T)
?scale_y_continuous
?pretty_breaks
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb', log_trans = T
, hist_rng = c(2010, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'turb', log_trans = F
, hist_rng = c(2010, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph', log_trans = F
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'ph', log_trans = F
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'ph', log_trans = F
, hist_rng = c(2010, 2014), by_month = FALSE)
devtools::load_all(".")
devtools::load_all(".")
?annual_range
annual_range(dat, param = 'do_mgl', target_yr = 2012)
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
annual_range(dat, param = 'do_mgl', target_yr = 2012)
annual_range(dat, param = 'ph', target_yr = 2012)
annual_range(dat, param = 'ph', target_yr = 2012, free_y = T)
devtools::load_all(".")
?seasonal_dot
do_plt <-
annual_range(dat, param = 'ph', target_yr = 2012, free_y = T)
do_plt$coordinates$limits
do_plt
annual_range(dat, param = 'ph', target_yr = 2013, free_y = T)
do_plt <-
annual_range(dat, param = 'ph', target_yr = 2013, free_y = T)
do_plt$coordinates$limits
ggplot_build(do_plt)$panel$ranges[[1]]$y.range
ggplot_build(do_plt)$layout$panel_scales_x[[1]]$range$range
ggplot_build(do_plt)$layout$panel_scales_y[[1]]$range$range
?ggplot_build
?seasonal_dot
dat_wq <- elksmwq
#dat_wq <- subset(dat_wq, subset = c('2010-01-01 0:00', '2017-01-01 0:00'))
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
seasonal_dot(dat_wq, param = 'do_mgl'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
seasonal_dot(dat_wq, param = 'ph'
, free_y = T
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
ggplot_build(do_plt)$layout$panel_scales_y[[1]]$range$range
max(ggplot_build(do_plt)$layout$panel_scales_y[[1]]$range$range)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, free_y = T
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
seasonal_dot(dat_wq, param = 'ph'
, free_y = F
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
?annual_range
devtools::load_all(".")
annual_range(dat, param = 'ph', target_yr = 2013, free_y = T)
annual_range(dat, param = 'ph', target_yr = 2013, free_y = F)
historical_range(dat, param = 'ph', target_yr = 2013, free_y = F)
historical_range(dat, param = 'ph', target_yr = 2013, free_y = T)
raw_boxplot(dat, param = 'ph', target_yr = 2013, free_y = T)
raw_boxplot(dat, param = 'ph', target_yr = 2013, free_y = F)
seasonal_boxplot(dat, param = 'ph', target_yr = 2013, free_y = F)
seasonal_boxplot(dat, param = 'ph', target_yr = 2013, free_y = T)
historical_daily_range(dat, param = 'ph', target_yr = 2013, free_y = T)
historical_daily_range(dat, param = 'ph', target_yr = 2013, free_y = F)
seasonal_dot(dat, param = 'ph', target_yr = 2013, free_y = F)
seasonal_dot(dat, param = 'ph', free_y = F)
seasonal_dot(dat, param = 'ph', free_y = T)
devtools::load_all(".")
?seasonal_dot
dat_wq <- elksmwq
#dat_wq <- subset(dat_wq, subset = c('2010-01-01 0:00', '2017-01-01 0:00'))
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
seasonal_dot(dat_wq, param = 'do_mgl'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
x <- seasonal_dot(dat_wq, param = 'ph'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
View(x)
min(x, na.rm = T)
View(x)
replace(x, '-Inf', NA)
x[x == -Inf]
x[x == -Inf, ]
df[is.infinite(df) | is.nan(df) ] <- NA
x[is.infinite(x) | is.nan(x) ] <- NA
y <- lapply(x[, c(1:3)], function(x) {
x[is.infinite(x) | is.nan(x) ] <- NA
})
y <- lapply(x[, c(1:3)], function(x) {
x[is.infinite(x) | is.nan(x) ] <- NA
}) %>% data.frame
library(dplyr)
y <- lapply(x[, c(1:3)], function(x) {
x[is.infinite(x) | is.nan(x) ] <- NA
}) %>% data.frame
View(y)
?is.finite
x
x[is.infinite(x)] <- NA
seasonal_dot(dat_wq, param = 'sal'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
devtools::load_all(".")
seasonal_dot(dat_wq, param = 'sal'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE)
seasonal_dot(dat_wq, param = 'sal'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE
, free-Y = T)
seasonal_dot(dat_wq, param = 'sal'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE
, free_y = T)
seasonal_dot(dat_wq, param = 'sal'
, lm_trend = TRUE
, lm_lab = TRUE
, plot_title = TRUE
, free_y = F)
devtools::load_all(".")
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = FALSE)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2007, 2014), by_month = FALSE)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = T)
threshold_percentile_plot(dat_wq, param = 'ph'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F)
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F, log_trans = T)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F, log_trans = T)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F, log_trans = T)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F, log_trans = T)
threshold_percentile_plot(dat_wq, param = 'turb'
, hist_rng = c(2007, 2014), by_month = FALSE, free_y = F, log_trans = F)
