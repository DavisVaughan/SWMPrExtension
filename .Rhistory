dat_nut <- apacpnut
dat_nut <- qaqc(dat_nut, qaqc_keep = c(0, 3, 5))
dat_nut <- rem_reps(dat_nut)
threshold_plot(dat_nut, param = 'po4f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
mx <- 0.05*1.1
mx
round_any(0.055, 2)
library(lubridate)
round_any(0.055, 2)
library(plyr)
round_any(0.055, 2)
?round_any
round_any(0.055, 2, ceiling)
round_any(0.055, .01, ceiling)
floor(0.001/0.1) * 0.1
floor(0.001/0.01) * 0.01
round_any
?f
floor(0.05/0.1) * 0.1
0.05/0.1
0.5*0.1
floor(0.55/0.1) * 0.1
ceiling(0.55/0.1) * 0.1
devtools::load_all(".")
threshold_plot(dat_nut, param = 'po4f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
threshold_plot(dat_nut, param = 'chla_n'
, rng = 2012
, thresholds = c(10, 20)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
threshold_plot(dat_nut, param = 'no3'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
threshold_plot(dat_nut, param = 'no3f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
View(dat_nut)
threshold_plot(dat_nut, param = 'nh4f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T)
threshold_plot(dat_nut, param = 'nh4f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T, plot_title = T)
devtools::load_all(".")
devtools::load_all(".")
threshold_plot(dat_nut, param = 'nh4f'
, rng = 2012
, thresholds = c(0.01, 0.05)
, threshold_labs = c('Good', 'Fair', 'Poor')
, monthly_smooth = T, plot_title = T)
chk <- SWMPr::site_codes()
chk <- sampling_stations
sites <- get_sites(data.file = 'C:/Users/Julie/Desktop/RNERRS/Data/Elkhorn_Slough')
sites <- get_sites(data.file = 'C:/Users/Julie/Desktop/RNERRS/Data/Elkhorn_Slough', type = 'wq')
sites <- get_sites(data.file = 'C:/Users/Julie/Desktop/RNERRS/Data/Padilla_Bay', type = 'wq')
getwd()
ap <- available.packages()
chk <- "flextable" %in% rownames(ap)
View(ap)
?available.packages
?flextable
library(flextable)
packrat::set_opts(vcs.ignore.src = TRUE)
?formula
install.packages(flextable)
install.packages('flextable')
?create_sk_flextable_list
?align
library(align)
library(flextable)
?align
?flextable
?officer
?fp_cell
?fp_border
?ft_col_names
?ft_col_names
?ft_col_names
?seasonal_boxplot
?ft_col_names
roxygen2::roxygenise()
warnings()
library(SWMPrExtension)
backtrack()
?seasonal_barplot
?generate_station_tabl
?generate_station_table
packrat::snapshot
packrat::snapshot()
unlink('packrat/lib-R', recursive = T)
install.packages('EnvStats')
install.packages('flextable')
library(SWMPrExtension)
packrat::snapshot()
packrat::snapshot()
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = F)
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = F, plot_title = T)
devtools::load_all(".")
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = F, plot_title = T)
attributes(dat_wq)
class(dat_wq)
?threshold_criteria_plot
?threshold_percentile_plot
?threshold_identification
?threshold_summary
?historical_daily_range
?sk_seasonal
?seasonal_boxplot
dat <- elksmwq
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
seasonal_boxplot(dat, param = 'do_mgl',
target_yr = 2015,
season = list(c(1,2,3), c(4,5,6), c(7,8,9), c(10, 11, 12)),
season_names = c('Winter', 'Spring', 'Summer', 'Fall'),
season_start = 'Spring')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'do_mgl',
target_yr = 2015,
season = list(c(1,2,3), c(4,5,6), c(7,8,9), c(10, 11, 12)),
season_names = c('Winter', 'Spring', 'Summer', 'Fall'),
season_start = 'Spring')
?historical_daily_range
data(apacpwq)
dat <- apacpwq
dat <- qaqc(apacpwq, qaqc_keep = c('0', '3', '5'))
historical_daily_range(dat, param = 'do_mgl', target_yr = 2013, criteria = 2)
devtools::load_all(".")
?seasonal_boxplot
dat <- elksmwq
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
seasonal_boxplot(dat, param = 'do_mgl')
seasonal_boxplot(dat, param = 'do_mgl',
target_yr = 2015,
season = list(c(1,2,3), c(4,5,6), c(7,8,9), c(10, 11, 12)),
season_names = c('Winter', 'Spring', 'Summer', 'Fall'),
season_start = 'Spring')
?`%in%`
?do
devtools::load_all(".")
?threshold_percentile_plot
dat_wq <- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq <- subset(dat_wq, subset = '2007-01-01 0:00', operator = '>=')
threshold_percentile_plot(dat_wq, param = 'do_mgl'
, hist_rng = c(2007, 2014), by_month = F)
?threshold_criteria_plot
devtools::load_all(".")
?threshold_criteria_plot
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
?historical_range
data(elksmwq)
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
# with criteria
y <- historical_range(dat, param = 'do_mgl', target_yr = 2013, criteria = 2)
ggsave(file = 'tmp.png', y, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
y <- historical_range(dat, param = 'do_mgl', target_yr = 2013, criteria = 2)
ggsave(file = 'tmp.png', y, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
?historical_range
dat <- import_local(path = 'tmp', station_code = 'hudfsmet')
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2)
dat <- import_local(path = 'tmp', station_code = 'hudfsmet')
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2)
y <-
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2, plot = F)
View(y)
devtools::load_all(".")
devtools::load_all(".")
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2, plot = T)
devtools::load_all(".")
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2, plot = T)
devtools::load_all(".")
historical_range(dat, param = 'atemp', target_yr = 2013, criteria = 2, plot = T)
annual_range(dat, param = 'atemp', target_yr = 2016)
devtools::load_all(".")
annual_range(dat, param = 'atemp', target_yr = 2016)
source('C:/Users/Julie/Desktop/SWMPrExtension/R/annual_range.R')
devtools::load_all(".")
annual_range(dat, param = 'atemp', target_yr = 2016)
library(rlang)
annual_range(dat, param = 'atemp', target_yr = 2016)
library(dplyr)
annual_range(dat, param = 'atemp', target_yr = 2016)
devtools::load_all(".")
annual_range(dat, param = 'atemp', target_yr = 2016)
library(lubridate)
library(lubridate)
annual_range(dat, param = 'atemp', target_yr = 2016)
devtools::load_all(".")
annual_range(dat, param = 'atemp', target_yr = 2016)
devtools::load_all(".")
annual_range(dat, param = 'atemp', target_yr = 2016)
sampling_stations <- sampling_stations
sampling_stations <- 'sampling_stations'
sampling_stations <- get(sampling_stations)
sampling_stations <- data(sampling_stations)
dat <- data(elksmwq)
data(sampling_stations)
View(sampling_stations)
View(sampling_stations)
sampling_stations$color <- ifelse(grepl(sampling_stations$Station.Code, 6, 8) == 'nut'),
x <- sampling_stations
substr(x$Station.Code, 5, 8)
substr(x$Station.Code, 6, 8)
x[grep('nut', substr(x$Station.Code, 6, 8), ] <- '#444E65'
x[substr(x$Station.Code, 6, 8) == 'nut', ] <- '#444E65'
View(x)
sampling_stations$color <- ifelse(grepl(sampling_stations$Station.Code, 6, 8) == 'nut'),
x <- sampling_stations
x$Station.Code[substr(x$Station.Code, 6, 8) == 'nut', ] <- '#444E65'
sampling_stations$color <- ifelse(grepl(sampling_stations$Station.Code, 6, 8) == 'nut'),
x <- sampling_stations
x$Station.Code[substr(x$Station.Code, 6, 8) == 'nut'] <- '#444E65'
View(x)
sampling_stations$color <- ifelse(grepl(sampling_stations$Station.Code, 6, 8) == 'nut'),
x <- sampling_stations
x$color[substr(x$Station.Code, 6, 8) == 'nut'] <- '#444E65'
View(x)
sampling_stations$color[substr(sampling_stations$Station.Code, 6, 8) == 'nut'] <- '#444E65'
?save
?saveRDS
saveRDS(sampling_stations
, file = 'data/sampling_stations.rds')
save(sampling_stations
, file = 'data/sampling_stations.rds')
save(sampling_stations
, file = 'data/sampling_stations.rda')
data(sampling_stations)
View(sampling_stations)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
sampling_stations
data(sampling_stations)
View(sampling_stations)
x <- sampling_stations %>% filter(substr(Station.Code, 6, 8) == 'met')
library(dplyr)
x <- sampling_stations %>% filter(substr(Station.Code, 6, 8) == 'met')
View(x)
sampling_stations$color[sampling_stations$Station.Code == 'wqbchmet'] <- '#BF9000'
View(sampling_stations)
x <- sampling_stations %>% filter(substr(Station.Code, 6, 8) == 'met')
y <- sampling_stations %>% filter(substr(Station.Code, 6, 8) != 'met')
View(x)
View(x)
View(y)
save(sampling_stations
, file = 'data/sampling_stations.rda')
?raw_boxplot
data(elksmwq)
dat <- elksmwq
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
raw_boxplot(dat, param = 'do_mgl')
dat <- import_local(path = 'tmp', station_code = 'owcocmet')
dat <- qaqc(elksmwq, qaqc_keep = c('0', '3', '5'))
raw_boxplot(dat, param = 'atemp')
dat <- import_local(path = 'tmp', station_code = 'owcocmet')
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
dat <- import_local(path = 'tmp', station_code = 'owcowmet')
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
raw_boxplot(dat, param = 'atemp')
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
tmp <- seasonal_boxplot(dat, param = 'atemp')
View(tmp)
tmp2 <- tmp[complete.cases(tmp), ]
View(tmp2)
devtools::load_all(".")
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
devtools::load_all(".")
seasonal_boxplot(dat, param = 'atemp')
dat <- import_local(path = 'tmp', station_code = 'owcowmet')
dat <- qaqc(dat, qaqc_keep = c('0', '3', '5'))
seasonal_boxplot(dat, param = 'atemp')
seasonal_boxplot(dat, param = 'atemp', target_yr = 2015)
threshold_percentile_plot(dat, param = 'atemp'
, hist_rng = c(2007, 2014), by_month = F)
devtools::load_all(".")
threshold_percentile_plot(dat, param = 'atemp'
, hist_rng = c(2007, 2014), by_month = F)
threshold_percentile_plot(dat, param = 'atemp'
, hist_rng = c(2007, 2014), by_month = F)
threshold_percentile_plot(dat, param = 'atemp'
, hist_rng = 2016, by_month = F)
threshold_percentile_plot(dat
, param = 'atemp'
, hist_rng = c(2007, 2016)
, target_yr = 2016
, by_month = F)
x <- dat
x$atemp <- x$atemp * 9 / 5 +32
threshold_percentile_plot(x, param = 'atemp'
, hist_rng = c(2007, 2014), converted = T, by_month = F)
?seasonal_dot
seasonal_dot(dat, param = 'atemp'
, lm_trend = F
, lm_lab = F
, plot_title = T)
seasonal_dot(dat, param = 'atemp'
, lm_trend = T
, lm_lab = T
, plot_title = T)
devtools::load_all(".")
seasonal_dot(dat, param = 'atemp'
, lm_trend = T
, lm_lab = T
, plot_title = T)
devtools::load_all(".")
seasonal_dot(dat, param = 'atemp'
, lm_trend = T
, lm_lab = T
, plot_title = T)
devtools::load_all(".")
x <- seasonal_dot(dat, param = 'atemp'
, lm_trend = T
, lm_lab = T
, plot_title = T)
devtools::load_all(".")
x <- seasonal_dot(dat, param = 'atemp'
, lm_trend = T
, lm_lab = T
, plot_title = T)
x
?threshold_criteria_plot
data(apacpwq)
dat_wq <- apacpwq
devtools::load_all(".")
data(apacpwq)
dat_wq <- apacpwq
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
devtools::load_all(".")
x <-
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
View(x)
View(x)
min(datetimestamp)
min(x$datetimestamp)
devtools::load_all(".")
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, target_yr = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, rng = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
devtools::load_all(".")
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, rng = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
library(lubridate)
dat_wq$do_mgl <- ifelse(month(dat_wq$datetimestamp) %in% c(1, 2, 3, 4), NA, dat_wq$do_mgl)
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, target_yr = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
threshold_criteria_plot(dat_wq, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, rng = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
View(x)
View(dat_wq)
dat_wq <- filter(month(dat_wq$datetimestamp) %in% c(1, 2, 3, 4))
library(dplyr)
dat_wq <- filter(month(dat_wq$datetimestamp) %in% c(1, 2, 3, 4))
dat_wq <- dat_wq[month(dat_wq$datetimestamp) %in% c(1:4)), ]
dat_wq <- dat_wq[month(dat_wq$datetimestamp) %in% c(1:4), ]
View(dat_wq)
dat_wq <- apacpwq
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
dat_wq <- dat_wq[!(month(dat_wq$datetimestamp) %in% c(1:4)), ]
View(apacpwq)
dat_wq <- dat_wq[, !(month(dat_wq$datetimestamp) %in% c(1:4))]
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
dat_wq <- apacpwq
dat_wq <- qaqc(dat_wq, qaqc_keep = c(0, 3, 5))
dat_wq2 <- dat_wq %>% filter(month(datetimestamp) %in% c(1:4))
threshold_criteria_plot(dat_wq2, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, rng = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
dat_wq2 <- dat_wq[!(month(dat_wq$datetimestamp) %in% c(1:4)), ]
threshold_criteria_plot(dat_wq2, param = 'do_mgl'
, thresholds = c(2, 5)
, threshold_labs = c('Poor', 'Fair', 'Good')
, rng = 2013
, monthly_smooth = T
, threshold_cols = c('#FEC596', '#FFFFCC', '#ABD9E9'))
month(min(dat_wq2$datetimestamp))
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
threshold_criteria_plot()
?threshold_criteria_plot
data(apacpnut)
dat_nut <- apacpnut
dat_nut <- qaqc(dat_nut, qaqc_keep = c(0, 3, 5))
dat_nut <- rem_reps(dat_nut)
dat_nut$dip <- dat_nut$po4f
attr(dat_nut, 'parameters') <- c(attr(dat_nut, 'parameters'), 'dip')
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor'))
ggsave(x, 'tmp.png', height = 4, width = 6, units = 'in', res = 300)
ggsave('tmp.png', x, height = 4, width = 6, units = 'in', res = 300)
?ggsave
ggsave('tmp.png', x, height = 4, width = 6, units = 'in', dpi = 300)
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor'))
ggsave(filename = 'tmp.png', x, height = 4, width = 6, units = 'in', dpi = 300)
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor')
, plot_title = T)
ggsave(filename = 'tmp.png', x, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor')
, plot_title = T)
ggsave(filename = 'tmp2.png', x, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor')
, plot_title = T)
ggsave(filename = 'tmp2.png', x, height = 4, width = 6, units = 'in', dpi = 300)
theme_bw()$plot.margin
devtools::load_all(".")
devtools::load_all(".")
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor')
, plot_title = T)
ggsave(filename = 'tmp2.png', x, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
x <-
threshold_criteria_plot(dat_nut, param = 'dip'
, thresholds = c(2, 5)
, threshold_labs = c('Good', 'Fair', 'Poor')
, plot_title = T)
ggsave(filename = 'tmp2.png', x, height = 4, width = 6, units = 'in', dpi = 300)
devtools::load_all(".")
devtools::load_all(".")
